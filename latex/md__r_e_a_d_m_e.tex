\href{https://travis-ci.org/facebook/KVOController}{\tt !\mbox{[}Build Status\mbox{]}(https\+://travis-\/ci.\+org/facebook/\+K\+V\+O\+Controller.\+png?branch=master)} \href{http://cocoadocs.org/docsets/KVOController}{\tt !\mbox{[}Version\mbox{]}(https\+://cocoapod-\/badges.\+herokuapp.\+com/v/\+K\+V\+O\+Controller/badge.\+png)} \href{http://cocoadocs.org/docsets/KVOController}{\tt !\mbox{[}Platform\mbox{]}(https\+://cocoapod-\/badges.\+herokuapp.\+com/p/\+K\+V\+O\+Controller/badge.\+png)}

Key-\/value observing is a particularly useful technique for communicating between layers in a Model-\/\+View-\/\+Controller application. K\+V\+O\+Controller builds on Cocoa's time-\/tested key-\/value observing implementation. It offers a simple, modern A\+P\+I, that is also thread safe. Benefits include\+:


\begin{DoxyItemize}
\item Notification using blocks, custom actions, or N\+S\+Key\+Value\+Observing callback.
\item No exceptions on observer removal.
\item Implicit observer removal on controller dealloc.
\item Thread-\/safety with special guards against observer resurrection – \href{http://openradar.appspot.com/radar?id=5305010728468480}{\tt rdar\+://15985376}.
\end{DoxyItemize}

For more information on K\+V\+O, see Apple's \href{https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html}{\tt Introduction to Key-\/\+Value Observing}.

\subsection*{Usage}

Example apps for i\+O\+S and O\+S X are included with the project. Here is one simple usage pattern\+:

```objective-\/c // create K\+V\+O controller with observer \hyperlink{interface_f_b_k_v_o_controller}{F\+B\+K\+V\+O\+Controller} $\ast$\+K\+V\+O\+Controller = \mbox{[}\hyperlink{interface_f_b_k_v_o_controller}{F\+B\+K\+V\+O\+Controller} controller\+With\+Observer\+:self\mbox{]}; self.\+K\+V\+O\+Controller = K\+V\+O\+Controller;

// observe clock date property \mbox{[}self.\+K\+V\+O\+Controller observe\+:clock key\+Path\+:"date" options\+:N\+S\+Key\+Value\+Observing\+Option\+Initial$\vert$\+N\+S\+Key\+Value\+Observing\+Option\+New block\+:$^\wedge$(Clock\+View $\ast$clock\+View, Clock $\ast$clock, N\+S\+Dictionary $\ast$change) \{

// update clock view with new value clock\+View.\+date = change\mbox{[}N\+S\+Key\+Value\+Change\+New\+Key\mbox{]}; \}\mbox{]}; ```

While simple, the above example is complete. A clock view creates a K\+V\+O controller to observe the clock date property. A block callback is used to handle initial and change notification. Unobservation happens implicitly on controller deallocation, since a strong reference to the {\ttfamily K\+V\+O\+Controller} is kept.

Note\+: the observer specified must support weak references. The zeroing weak reference guards against notification of a deallocated observer instance.

\paragraph*{N\+S\+Object Category}

For an even easier usage, just {\ttfamily \#import $<$K\+V\+O\+Controller/\+N\+S\+Object+\+F\+B\+K\+V\+O\+Controller.h} for an automatic {\ttfamily K\+V\+O\+Controller} property on all objects.

```objc \mbox{[}self.\+K\+V\+O\+Controller observe\+:clock key\+Path\+:"date" options\+:N\+S\+Key\+Value\+Observing\+Option\+Initial$\vert$\+N\+S\+Key\+Value\+Observing\+Option\+New action\+:(update\+Clock\+With\+Date\+Change\+:)\mbox{]}; ```

\subsection*{Prerequisites}

K\+V\+O\+Controller takes advantage of recent Objective-\/\+C runtime advances, including A\+R\+C and weak collections. It requires\+:


\begin{DoxyItemize}
\item i\+O\+S 6 or later.
\item O\+S X 10.\+7 or later.
\end{DoxyItemize}

\subsection*{Installation}

To install using Cocoa\+Pods, add the following to your project Podfile\+:

```ruby pod 'K\+V\+O\+Controller' ```

Alternatively, drag and drop \hyperlink{_f_b_k_v_o_controller_8h_source}{F\+B\+K\+V\+O\+Controller.\+h} and F\+B\+K\+V\+O\+Controller.\+m into your Xcode project, agreeing to copy files if needed. For i\+O\+S applications, you can choose to link against the static library target of the K\+V\+O\+Controller project.

Having installed using Cocoa\+Pods, add the following to import in Objective-\/\+C\+: ```objective-\/c \#import $<$\hyperlink{_f_b_k_v_o_controller_8h_source}{K\+V\+O\+Controller/\+F\+B\+K\+V\+O\+Controller.\+h}$>$ ```

\subsection*{Testing}

The unit tests included use Cocoa\+Pods for managing dependencies. Install Cocoa\+Pods if you haven't already done so. Then, at the command line, navigate to the root K\+V\+O\+Controller directory and type\+:

```sh pod install ```

This will install and add test dependencies on O\+C\+Hamcrest and O\+C\+Mockito. Re-\/open the Xcode K\+V\+O\+Controller workspace and Test, ⌘\+U.

\subsection*{Licence}

K\+V\+O\+Controller is released under a B\+S\+D License. See L\+I\+C\+E\+N\+S\+E file for details. 